<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://blog.toshima.ru/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.2.1">Jekyll</generator><link href="http://blog.toshima.ru/feed.xml" rel="self" type="application/atom+xml" /><link href="http://blog.toshima.ru/" rel="alternate" type="text/html" /><updated>2016-12-07T10:01:17+09:00</updated><id>http://blog.toshima.ru/</id><title type="html">Toshimaru’s Blog</title><subtitle>Where there's a will, there's a way.
</subtitle><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><entry><title type="html">Display disk usage on macOS with du command</title><link href="http://blog.toshima.ru/2016/11/26/display-disk-usage-command-on-mac.html" rel="alternate" type="text/html" title="Display disk usage on macOS with du command" /><published>2016-11-26T00:00:00+09:00</published><updated>2016-11-26T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/11/26/display-disk-usage-command-on-mac</id><content type="html" xml:base="http://blog.toshima.ru/2016/11/26/display-disk-usage-command-on-mac.html">&lt;p&gt;You can get disk usage on MacOS by using &lt;code class=&quot;highlighter-rouge&quot;&gt;du&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ du -d 1 -h
200M  ./Amazon Music.app
6.1M  ./Android File Transfer.app
1.9M  ./App Store.app
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt; option means depth. &lt;code class=&quot;highlighter-rouge&quot;&gt;du&lt;/code&gt; outputs result for all files which is too much, so &lt;code class=&quot;highlighter-rouge&quot;&gt;-d 1&lt;/code&gt; option is needed.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-h&lt;/code&gt; option means human-readable. This option add unit suffixes such as Byte, Kilobyte, Megabyte, Gigabyte.&lt;/p&gt;

&lt;h2 id=&quot;filter-by-unit&quot;&gt;Filter by unit&lt;/h2&gt;

&lt;p&gt;If you want to filter result by unit:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;du -d 1 -h | grep -e &quot;\dG&quot;
2.0G  ./iMovie.app
1.3G  ./iPhoto.app
8.2G  .
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="mac" /><category term="bash" /><summary type="html">You can get disk usage on MacOS by using du command.</summary></entry><entry><title type="html">Escape ERB tag string in ERB file</title><link href="http://blog.toshima.ru/2016/11/18/escape-erb-tag-in-erb.html" rel="alternate" type="text/html" title="Escape ERB tag string in ERB file" /><published>2016-11-18T00:00:00+09:00</published><updated>2016-11-18T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/11/18/escape-erb-tag-in-erb</id><content type="html" xml:base="http://blog.toshima.ru/2016/11/18/escape-erb-tag-in-erb.html">&lt;p&gt;How can we output erb tag string like &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;% erb %&amp;gt;&lt;/code&gt; in erb file without being interpreted as erb? You can do this by using double percent &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;%% %&amp;gt;&lt;/code&gt;!&lt;/p&gt;

&lt;div class=&quot;language-erb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;escaped&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Let’s look at how it changes on &lt;code class=&quot;highlighter-rouge&quot;&gt;irb&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$  irb
&amp;gt;  ERB.new(&quot;&amp;lt;%% escaped? %&amp;gt;&quot;).result
=&amp;gt; &quot;&amp;lt;% escaped? %&amp;gt;&quot;
&amp;gt;  ERB.new(&quot;&amp;lt;% escaped? %&amp;gt;&quot;).result
NoMethodError: undefined method `escaped?' for main:Object
	from (erb):1:in `&amp;lt;main&amp;gt;'
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;%%&lt;/code&gt; becomes string without an error.&lt;/p&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;(JAPANESE) &lt;a href=&quot;http://koseki.hatenablog.com/entry/20090416/erbtag&quot;&gt;http://koseki.hatenablog.com/entry/20090416/erbtag&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="erb" /><category term="ruby" /><summary type="html">How can we output erb tag string like &amp;lt;% erb %&amp;gt; in erb file without being interpreted as erb? You can do this by using double percent &amp;lt;%% %&amp;gt;!</summary></entry><entry><title type="html">Bundler Github/Gist shorthand</title><link href="http://blog.toshima.ru/2016/11/07/bundler-gist-shorthand.html" rel="alternate" type="text/html" title="Bundler Github/Gist shorthand" /><published>2016-11-07T00:00:00+09:00</published><updated>2016-11-07T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/11/07/bundler-gist-shorthand</id><content type="html" xml:base="http://blog.toshima.ru/2016/11/07/bundler-gist-shorthand.html">&lt;h2 id=&quot;bundler-for-git-source&quot;&gt;Bundler for git source&lt;/h2&gt;

&lt;p&gt;You may know how to &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; from &lt;code class=&quot;highlighter-rouge&quot;&gt;git&lt;/code&gt; source.&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'page_number'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;git: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://gist.github.com/123456789&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;bundler-for-githubgist-source&quot;&gt;Bundler for GitHub/Gist source&lt;/h2&gt;

&lt;p&gt;How about GitHub/Gist source?&lt;/p&gt;

&lt;p&gt;Bundler has shorthands for GitHub/Gist.&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;page_number&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;github: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;user_name/repo_name&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;page_number&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;gist: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;gist_id_123456789&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://bundler.io/git.html#custom-git-sources&quot;&gt;Bundler: Custom git sources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="bundler" /><category term="gist" /><category term="gem" /><summary type="html">Bundler for git source</summary></entry><entry><title type="html">Build group_by and having query with ActiveRecord</title><link href="http://blog.toshima.ru/2016/10/20/activerecord-group-having.html" rel="alternate" type="text/html" title="Build group_by and having query with ActiveRecord" /><published>2016-10-20T00:00:00+09:00</published><updated>2016-10-20T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/10/20/activerecord-group-having</id><content type="html" xml:base="http://blog.toshima.ru/2016/10/20/activerecord-group-having.html">&lt;p&gt;Want to build query which has &lt;code class=&quot;highlighter-rouge&quot;&gt;group by&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;having&lt;/code&gt;(like below) with ActiveRecord?&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tables&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;HAVING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;You can build it by using &lt;code class=&quot;highlighter-rouge&quot;&gt;group&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;having&lt;/code&gt; which are &lt;code class=&quot;highlighter-rouge&quot;&gt;ActiveRecord::QueryMethods&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecordModel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;having&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;count(*) &amp;gt; 1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;count&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://apidock.com/rails/ActiveRecord/QueryMethods&quot;&gt;ActiveRecord::QueryMethods - APIdock&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="activerecord" /><summary type="html">Want to build query which has group by and having(like below) with ActiveRecord?</summary></entry><entry><title type="html">Generate Ed25519 SSH key</title><link href="http://blog.toshima.ru/2016/10/10/generate-ed25519-ssh-key.html" rel="alternate" type="text/html" title="Generate Ed25519 SSH key" /><published>2016-10-10T00:00:00+09:00</published><updated>2016-10-10T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/10/10/generate-ed25519-ssh-key</id><content type="html" xml:base="http://blog.toshima.ru/2016/10/10/generate-ed25519-ssh-key.html">&lt;p&gt;Using Ed25519 as SSH key is recommended because it has:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;High security level. This system has a 2^128 security target; breaking it has similar difficulty to breaking NIST P-256, RSA with ~3000-bit keys, strong 128-bit block ciphers, etc.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;via. &lt;a href=&quot;http://ed25519.cr.yp.to/&quot;&gt;Ed25519: high-speed high-security signatures&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;environment&quot;&gt;Environment&lt;/h2&gt;

&lt;p&gt;Mac OS X El Capitan&lt;/p&gt;

&lt;h2 id=&quot;ssh-version&quot;&gt;SSH version&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh -V
OpenSSH_6.9p1, LibreSSL 2.1.8
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;generate-ed25519-ssh&quot;&gt;Generate Ed25519 SSH&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh-keygen -t ed25519
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh-keygen -t ed25519
Generating public/private ed25519 key pair.
Enter file in which to save the key (/Users/toshi/.ssh/id_ed25519):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /Users/toshi/.ssh/id_ed25519.
Your public key has been saved in /Users/toshi/.ssh/id_ed25519.pub.
The key fingerprint is:
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
The key's randomart image is:
+--[ED25519 256]--+
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
| xxx xxx xxx xxx |
+----[SHA256]-----+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Then, your private key should be at &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.ssh/id_ed25519&lt;/code&gt; and your public key should be at &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.ssh/id_ed25519.pub&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/EdDSA&quot;&gt;EdDSA - Wikipedia, the free encyclopedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="ssh" /><category term="security" /><summary type="html">Using Ed25519 as SSH key is recommended because it has:</summary></entry><entry><title type="html">Publish Jekyll site without gh-pages branch</title><link href="http://blog.toshima.ru/2016/08/24/publish-jekyll-without-gh-pages.html" rel="alternate" type="text/html" title="Publish Jekyll site without gh-pages branch" /><published>2016-08-24T00:00:00+09:00</published><updated>2016-08-24T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/08/24/publish-jekyll-without-gh-pages</id><content type="html" xml:base="http://blog.toshima.ru/2016/08/24/publish-jekyll-without-gh-pages.html">&lt;p&gt;Github announced &lt;a href=&quot;https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/&quot;&gt;variety of sources of Github Pages&lt;/a&gt; is supported in &lt;a href=&quot;https://github.com/blog/2233-publish-your-project-documentation-with-github-pages&quot;&gt;their official blog&lt;/a&gt;. It allows developers to publish Github Pages with master branch instead of &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; branch. Since this feature, you can publish your Jekyll site without using &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; branch and Github Pages deployment now can be much simpler.&lt;/p&gt;

&lt;h2 id=&quot;build-page-on-docs-directory&quot;&gt;Build page on docs directory&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;First step&lt;/strong&gt;: Configure build destination.&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# _config.yml&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;./docs&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Now Jekyll pages are built on &lt;code class=&quot;highlighter-rouge&quot;&gt;./docs&lt;/code&gt; directory.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ jekyll build
Configuration file: /Users/toshimaru/blog.toshima.ru/_config.yml
            Source: /Users/toshimaru/blog.toshima.ru
       Destination: ./docs
 Incremental build: disabled. Enable with --incremental
      Generating...
                    done in 4.078 seconds.
 Auto-regeneration: disabled. Use --watch to enable.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Yay, you are almost ready to publish the pages.&lt;/p&gt;

&lt;h2 id=&quot;use-docs-instead-of-gh-pages-branch&quot;&gt;Use docs instead of gh-pages branch&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Last step&lt;/strong&gt;: Change Github Pages source in your repository setting.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/doc-gh-pages.png&quot; alt=&quot;change Github Pages source&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You will see your Github Pages on your own published pages. Happy Jekylling &amp;lt;3&lt;/p&gt;

&lt;h2 id=&quot;pro-tip&quot;&gt;Pro Tip&lt;/h2&gt;

&lt;p&gt;By using &lt;a href=&quot;https://github.com/ruby/rake&quot;&gt;rake&lt;/a&gt;, you can deploy your Jekyll site with one command, &lt;code class=&quot;highlighter-rouge&quot;&gt;rake deploy&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Rakefile&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'deploy Jekyll site to Github Pages'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:deploy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bundle exec jekyll clean'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bundle exec jekyll build'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git add ./docs'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git commit -m \'Update\''&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sh&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git push origin master'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;In this task, &lt;code class=&quot;highlighter-rouge&quot;&gt;rake deploy&lt;/code&gt; builds Jekyll site and push it to Github for you. This is useful if you’d like to release your site on CI such as TravisCI, CircleCi.&lt;/p&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jekyllrb.com/docs/configuration/&quot;&gt;Configuration - Jekyll • Simple, blog-aware, static sites&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="jekyll" /><category term="github" /><summary type="html">Github announced variety of sources of Github Pages is supported in their official blog. It allows developers to publish Github Pages with master branch instead of gh-pages branch. Since this feature, you can publish your Jekyll site without using gh-pages branch and Github Pages deployment now can be much simpler.</summary></entry><entry><title type="html">Get HTML/JSON response from URL simply in Ruby</title><link href="http://blog.toshima.ru/2016/08/09/get-uri-in-ruby.html" rel="alternate" type="text/html" title="Get HTML/JSON response from URL simply in Ruby" /><published>2016-08-09T00:00:00+09:00</published><updated>2016-08-09T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/08/09/get-uri-in-ruby</id><content type="html" xml:base="http://blog.toshima.ru/2016/08/09/get-uri-in-ruby.html">&lt;h2 id=&quot;get-html-response-from-url&quot;&gt;GET HTML response from URL&lt;/h2&gt;

&lt;p&gt;To &lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt; URL and the response simply in Ruby:&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'net/http'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'uri'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'https://google.com/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Parse URL from URI string&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Net::HTTP.get&lt;/code&gt; the parsed URL&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;get-http-status-code-from-url&quot;&gt;GET HTTP status code from URL&lt;/h2&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'net/http'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'uri'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'https://google.com/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;code&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;get_response&lt;/code&gt; method returns &lt;code class=&quot;highlighter-rouge&quot;&gt;Net::HTTPResponse&lt;/code&gt; which has methods like &lt;code class=&quot;highlighter-rouge&quot;&gt;code&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;body&lt;/code&gt;, etc.&lt;/p&gt;

&lt;h2 id=&quot;get-json-response-from-url&quot;&gt;GET JSON response from URL&lt;/h2&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'net/http'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'uri'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'json'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;URI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'http://www.example.com/sample.json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Net&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;Reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruby-doc.org/stdlib-2.3.3/libdoc/net/http/rdoc/Net/HTTP.html&quot;&gt;Class: Net::HTTP (Ruby 2.3.3)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;[JAPANESE] &lt;a href=&quot;http://qiita.com/awakia/items/bd8c1385115df27c15fa&quot;&gt;RubyでJSON形式の結果が返ってくるURLをParseする - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="ruby" /><summary type="html">GET HTML response from URL</summary></entry><entry><title type="html">Show Active Record Model column names</title><link href="http://blog.toshima.ru/2016/06/18/active-record-model-columns.html" rel="alternate" type="text/html" title="Show Active Record Model column names" /><published>2016-06-18T00:00:00+09:00</published><updated>2016-06-18T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/06/18/active-record-model-columns</id><content type="html" xml:base="http://blog.toshima.ru/2016/06/18/active-record-model-columns.html">&lt;p&gt;Active Record provides a &lt;code class=&quot;highlighter-rouge&quot;&gt;column_names&lt;/code&gt; method to show column names of a Model.&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;column_names&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# =&amp;gt; [&quot;id&quot;, &quot;name&quot;, &quot;email&quot;, &quot;password_digest&quot;, &quot;created_at&quot;, &quot;updated_at&quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/5575970/activerecord-list-columns-in-table-from-console&quot;&gt;sql - ActiveRecord: List columns in table from console - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="activerecord" /><category term="rails" /><summary type="html">Active Record provides a column_names method to show column names of a Model.</summary></entry><entry><title type="html">Installing MySQL 5.7 on CircleCI</title><link href="http://blog.toshima.ru/2016/06/15/mysql-5-7-on-circle-ci.html" rel="alternate" type="text/html" title="Installing MySQL 5.7 on CircleCI" /><published>2016-06-15T00:00:00+09:00</published><updated>2016-06-15T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/06/15/mysql-5-7-on-circle-ci</id><content type="html" xml:base="http://blog.toshima.ru/2016/06/15/mysql-5-7-on-circle-ci.html">&lt;h2 id=&quot;update-2&quot;&gt;[UPDATE 2]&lt;/h2&gt;

&lt;p&gt;Current best approach is changing CircleCI &lt;strong&gt;Build Environment&lt;/strong&gt; to the latest version which is &lt;code class=&quot;highlighter-rouge&quot;&gt;Ubuntu 14.04&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://circleci.com/docs/build-image-trusty/&quot;&gt;Ubuntu 14.04 (Trusty) - CircleCI&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This build image has MySQL 5.7.x by default.&lt;/p&gt;

&lt;h2 id=&quot;update&quot;&gt;[UPDATE]&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://s3.amazonaws.com/circle-downloads/install-mysql5.7-circleci.sh&quot;&gt;Original script&lt;/a&gt; currently doesn’t work because it refers to &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql-5.7-dmr&lt;/code&gt;&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; which is outdated.&lt;/p&gt;

&lt;p&gt;Please use &lt;a href=&quot;https://gist.github.com/toshimaru/06ffbf2e8ad7d4e3dab889fa27681835/&quot;&gt;my forked script&lt;/a&gt;.&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;#!/bin/bash
set -x
set -e

export DEBIAN_FRONTEND=noninteractive

curl -LO https://dev.mysql.com/get/mysql-apt-config_0.7.3-1_all.deb
echo mysql-apt-config mysql-apt-config/select-product          select Apply              | sudo debconf-set-selections
echo mysql-apt-config mysql-apt-config/select-server           select mysql-5.7          | sudo debconf-set-selections
echo mysql-apt-config mysql-apt-config/select-connector-python select none               | sudo debconf-set-selections
echo mysql-apt-config mysql-apt-config/select-workbench        select none               | sudo debconf-set-selections
echo mysql-apt-config mysql-apt-config/select-utilities        select none               | sudo debconf-set-selections
echo mysql-apt-config mysql-apt-config/select-connector-odbc   select connector-odbc-x.x | sudo debconf-set-selections
sudo -E dpkg -i mysql-apt-config_0.7.3-1_all.deb
sudo apt-get update
echo mysql-community-server mysql-community-server/re-root-pass password ${mysql_root_password} | sudo debconf-set-selections
echo mysql-community-server mysql-community-server/root-pass    password ${mysql_root_password} | sudo debconf-set-selections
sudo -E apt-get -y install mysql-community-server

echo &amp;quot;Checking installed version.....&amp;quot;
mysql -D mysql -e &amp;quot;SELECT version()&amp;quot;
echo &amp;quot;Done!!&amp;quot;&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/toshimaru/06ffbf2e8ad7d4e3dab889fa27681835.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The raw source is: &lt;a href=&quot;https://gist.githubusercontent.com/toshimaru/06ffbf2e8ad7d4e3dab889fa27681835/raw/install-mysql5.7-circleci.sh&quot;&gt;https://gist.githubusercontent.com/toshimaru/06ffbf2e8ad7d4e3dab889fa27681835/raw/install-mysql5.7-circleci.sh&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;CircleCI doesn’t support MySQL 5.7 by default.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://discuss.circleci.com/users/kimh/activity&quot;&gt;kimh&lt;/a&gt;, CircleCI employee, created a script to install MySQL 5.7 on CircleCI.&lt;/p&gt;

&lt;p&gt;To use this script, add below configuration to your &lt;code class=&quot;highlighter-rouge&quot;&gt;circle.yml&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;curl -sSL https://gist.githubusercontent.com/toshimaru/06ffbf2e8ad7d4e3dab889fa27681835/raw/install-mysql5.7-circleci.sh | sh&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;The output on CircleCI is:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(snip)
..
* MySQL Community Server 5.7.14 is started
Setting up mysql-server (5.7.14-1ubuntu12.04) ...
Setting up libmysqlclient20 (5.7.14-1ubuntu12.04) ...
Setting up libmysqlclient-dev (5.7.14-1ubuntu12.04) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
+ echo Checking installed version.....
Checking installed version.....
+ mysql -D mysql -e SELECT version()
version()
5.7.14
+ echo Done!!
Done!!
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Then, you can use MySQL 5.7 on CircleCI container.&lt;/p&gt;

&lt;h2 id=&quot;see-also&quot;&gt;See also&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://discuss.circleci.com/t/installing-mysql-5-7/1021&quot;&gt;Installing MySQL 5.7 - Build Environment - CircleCI Community Discussion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;DMR means development milestone release. ref. &lt;a href=&quot;https://dev.mysql.com/doc/mysql-development-cycle/en/development-milestone-releases.html&quot;&gt;MySQL :: MySQL Development Cycle :: 6 Development Milestone Releases&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="circleci" /><category term="mysql" /><summary type="html">[UPDATE 2]</summary></entry><entry><title type="html">Fix Jekyll build error: Invalid date error</title><link href="http://blog.toshima.ru/2016/06/13/fix-jekyll-invalid-date.html" rel="alternate" type="text/html" title="Fix Jekyll build error: Invalid date error" /><published>2016-06-13T00:00:00+09:00</published><updated>2016-06-13T00:00:00+09:00</updated><id>http://blog.toshima.ru/2016/06/13/fix-jekyll-invalid-date</id><content type="html" xml:base="http://blog.toshima.ru/2016/06/13/fix-jekyll-invalid-date.html">&lt;p&gt;When I ran &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build&lt;/code&gt;, I got an error:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Configuration file: blog.toshima.ru/_config.yml
            Source: blog.toshima.ru
       Destination: blog.toshima.ru/_site
 Incremental build: disabled. Enable with --incremental
      Generating...
             ERROR: YOUR SITE COULD NOT BE BUILT:
                    ------------------------------------
                    Invalid date '&amp;lt;%= Time.now.strftime('%Y-%m-%d %H:%M:%S %z') %&amp;gt;': Document 'gems/jekyll-3.1.6/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb' does not have a valid date in the YAML front matter.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This is because I didn’t exclude &lt;code class=&quot;highlighter-rouge&quot;&gt;vendor&lt;/code&gt; directory in &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt;, so I added the following Configuration:&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;vendor&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;This fixes Jekyll build error.&lt;/p&gt;</content><author><name>{&quot;twitter&quot;=&gt;&quot;toshimaru_e&quot;}</name></author><category term="jekyll" /><summary type="html">When I ran jekyll build, I got an error:</summary></entry></feed>
